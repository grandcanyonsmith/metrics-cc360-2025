{"ast":null,"code":"var _jsxFileName = \"/Users/canyonsmith/Desktop/metrics-cc360-2025/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { subDays } from 'date-fns';\nimport { fetchDashboardMetrics, fetchMetricDetails } from './services/api';\nimport MetricCard from './components/MetricCard';\nimport DateRangePicker from './components/DateRangePicker';\nimport MetricDetailsModal from './components/MetricDetailsModal';\nimport { BarChart3, TrendingUp, Users, CreditCard, Activity, Target, Monitor, Calendar, AlertTriangle, DollarSign } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [startDate, setStartDate] = useState(subDays(new Date(), 30));\n  const [endDate, setEndDate] = useState(new Date());\n  const [metrics, setMetrics] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedMetric, setSelectedMetric] = useState(null);\n  const [metricDetails, setMetricDetails] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isDetailsLoading, setIsDetailsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [showOnlyNonActivated, setShowOnlyNonActivated] = useState(false);\n  const [showOnlyDormant, setShowOnlyDormant] = useState(false);\n  const metricConfigs = {\n    'dormant_account_rate': {\n      title: 'Dormant Account Rate',\n      icon: Users,\n      description: 'Percentage of new purchasers with zero sessions after first purchase',\n      format: 'percentage',\n      category: 'Customer Success'\n    },\n    'involuntary_churn_rate': {\n      title: 'Involuntary Churn Rate',\n      icon: CreditCard,\n      description: 'Percentage of subscriptions canceled due to failed payments',\n      format: 'percentage',\n      category: 'Finance'\n    },\n    'dunning_recovery_rate': {\n      title: 'Dunning Recovery Rate',\n      icon: AlertTriangle,\n      description: 'Percentage of failed payments that were successfully recovered',\n      format: 'percentage',\n      category: 'Finance'\n    },\n    't24h_activation_rate': {\n      title: '24h Activation Rate',\n      icon: Target,\n      description: 'Percentage of new users who performed a key action within 24 hours',\n      format: 'percentage',\n      category: 'Customer Success'\n    },\n    'source_attribution_coverage': {\n      title: 'Source Attribution Coverage',\n      icon: BarChart3,\n      description: 'Percentage of pageviews with campaign attribution data',\n      format: 'percentage',\n      category: 'Marketing'\n    },\n    'cac': {\n      title: 'Customer Acquisition Cost',\n      icon: DollarSign,\n      description: 'Total ad spend divided by total new trials',\n      format: 'currency',\n      category: 'Marketing'\n    },\n    'ltv': {\n      title: 'Lifetime Value',\n      icon: DollarSign,\n      description: 'Average revenue per customer over their lifetime',\n      format: 'currency',\n      category: 'Finance'\n    },\n    'platform_breakdown': {\n      title: 'Platform Breakdown',\n      icon: Monitor,\n      description: 'Top platforms by event count',\n      format: 'list',\n      category: 'Product & IT'\n    },\n    'root_cause_pareto': {\n      title: 'Root Cause Pareto',\n      icon: Activity,\n      description: 'Top payment failure reasons',\n      format: 'pareto',\n      category: 'Finance'\n    },\n    'daily_trends': {\n      title: 'Daily Event Trends',\n      icon: Calendar,\n      description: 'Daily event counts and user activity',\n      format: 'trends',\n      category: 'Product & IT'\n    }\n  };\n  useEffect(() => {\n    fetchMetrics();\n  }, [startDate, endDate]);\n  const fetchMetrics = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const data = await fetchDashboardMetrics(startDate.toISOString(), endDate.toISOString());\n      setMetrics(data);\n      console.log('data', data);\n    } catch (error) {\n      console.error('Failed to fetch metrics:', error);\n      setError('Failed to load metrics. Please check your connection and try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleViewDetails = async metric => {\n    setSelectedMetric(metric);\n    setIsModalOpen(true);\n    setIsDetailsLoading(true);\n    let extraParams = {};\n    if (metric === 't24h_activation_rate' && showOnlyNonActivated) {\n      extraParams.activated = 'false';\n    }\n    if (metric === 'dormant_account_rate' && showOnlyDormant) {\n      extraParams.dormant = 'true';\n    }\n    // Log for debugging\n    console.log('Fetching details for', metric, 'from', startDate.toISOString(), 'to', endDate.toISOString(), 'params:', extraParams);\n    try {\n      const details = await fetchMetricDetails(metric, startDate.toISOString(), endDate.toISOString(), extraParams);\n      setMetricDetails(details);\n    } catch (error) {\n      console.error('Failed to fetch metric details:', error);\n      setMetricDetails([]);\n    } finally {\n      setIsDetailsLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (isModalOpen && selectedMetric === 't24h_activation_rate') {\n      handleViewDetails('t24h_activation_rate');\n    }\n    // eslint-disable-next-line\n  }, [showOnlyNonActivated]);\n  useEffect(() => {\n    if (isModalOpen && selectedMetric === 'dormant_account_rate') {\n      handleViewDetails('dormant_account_rate');\n    }\n    // eslint-disable-next-line\n  }, [showOnlyDormant]);\n  const handleDateChange = (newStartDate, newEndDate) => {\n    setStartDate(newStartDate);\n    setEndDate(newEndDate);\n  };\n  const closeModal = () => {\n    setIsModalOpen(false);\n    setSelectedMetric(null);\n    setMetricDetails([]);\n  };\n  const formatValue = (value, format) => {\n    if (value === null || value === undefined) return 'N/A';\n    switch (format) {\n      case 'percentage':\n        return `${(value * 100).toFixed(1)}%`;\n      case 'currency':\n        return `$${value.toFixed(2)}`;\n      case 'number':\n        return value.toLocaleString();\n      default:\n        return value.toString();\n    }\n  };\n  const renderPlatformBreakdown = data => {\n    if (!data || !Array.isArray(data)) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: [data.slice(0, 3).map((platform, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-600\",\n          children: platform.platform\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-medium\",\n          children: platform.event_count.toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)), data.length > 3 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-gray-500 text-center\",\n        children: [\"+\", data.length - 3, \" more platforms\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this);\n  };\n  const renderParetoBreakdown = data => {\n    if (!data || !Array.isArray(data)) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: data.map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-purple-700/80 text-white px-2 py-1 rounded font-mono text-xs\",\n          children: item.reason\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-gray-900/80 text-white px-2 py-1 rounded font-mono text-base font-bold\",\n          children: item.count.toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow-sm border-b\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between h-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n              className: \"w-8 h-8 text-primary-600 mr-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-gray-900\",\n              children: \"SaaS Metrics Dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: [startDate.toLocaleDateString(), \" - \", endDate.toLocaleDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",\n      children: /*#__PURE__*/_jsxDEV(DateRangePicker, {\n        startDate: startDate,\n        endDate: endDate,\n        onDateChange: handleDateChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 bg-red-50 border border-red-200 rounded-md p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-5 w-5 text-red-400\",\n              viewBox: \"0 0 20 20\",\n              fill: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\n                clipRule: \"evenodd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-medium text-red-800\",\n              children: \"Error loading metrics\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-red-700\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this), ['Customer Success', 'Finance', 'Sales', 'Product & IT', 'Marketing'].map(category => {\n        const categoryMetrics = Object.entries(metricConfigs).filter(([, config]) => config.category === category);\n        if (categoryMetrics.length === 0) return null;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-gray-800 mb-4\",\n            children: category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n            children: categoryMetrics.map(([key, config]) => {\n              const metric = metrics[key];\n              const Icon = config.icon;\n              if (!metric) {\n                return /*#__PURE__*/_jsxDEV(MetricCard, {\n                  title: config.title,\n                  value: null,\n                  definition: config.description,\n                  status: \"missing\",\n                  message: \"No data available\",\n                  isLoading: isLoading\n                }, key, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 23\n                }, this);\n              }\n              let displayValue = null;\n              let displayContent = null;\n              if (config.format === 'list' && metric.data) {\n                displayContent = renderPlatformBreakdown(metric.data);\n              } else if (config.format === 'pareto' && metric.data) {\n                displayContent = renderParetoBreakdown(metric.data);\n              } else if (metric.value !== null && metric.value !== undefined) {\n                displayValue = formatValue(metric.value, config.format);\n              }\n              return /*#__PURE__*/_jsxDEV(MetricCard, {\n                title: config.title,\n                value: displayValue,\n                content: displayContent,\n                definition: config.description,\n                status: metric.status || 'ok',\n                message: metric.message,\n                numerator: metric.numerator,\n                denominator: metric.denominator,\n                onViewDetails: () => handleViewDetails(key),\n                isLoading: isLoading\n              }, key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)]\n        }, category, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this);\n      }), metrics.daily_trends && metrics.daily_trends.data && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg border p-6 shadow-sm mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-gray-900 mb-4\",\n          children: \"Daily Event Trends\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Event\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Count\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Unique Users\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: metrics.daily_trends.data.slice(0, 10).map((row, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: row.date\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: row.event\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: row.event_count.toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",\n                  children: row.unique_users.toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MetricDetailsModal, {\n      isOpen: isModalOpen,\n      onClose: closeModal,\n      metric: selectedMetric,\n      data: metricDetails,\n      isLoading: isDetailsLoading,\n      showOnlyNonActivated: showOnlyNonActivated,\n      setShowOnlyNonActivated: setShowOnlyNonActivated,\n      showOnlyDormant: showOnlyDormant,\n      setShowOnlyDormant: setShowOnlyDormant\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ZkXgkX2LONdGfVJYN6lNSgrGsyY=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","subDays","fetchDashboardMetrics","fetchMetricDetails","MetricCard","DateRangePicker","MetricDetailsModal","BarChart3","TrendingUp","Users","CreditCard","Activity","Target","Monitor","Calendar","AlertTriangle","DollarSign","jsxDEV","_jsxDEV","App","_s","startDate","setStartDate","Date","endDate","setEndDate","metrics","setMetrics","isLoading","setIsLoading","selectedMetric","setSelectedMetric","metricDetails","setMetricDetails","isModalOpen","setIsModalOpen","isDetailsLoading","setIsDetailsLoading","error","setError","showOnlyNonActivated","setShowOnlyNonActivated","showOnlyDormant","setShowOnlyDormant","metricConfigs","title","icon","description","format","category","fetchMetrics","data","toISOString","console","log","handleViewDetails","metric","extraParams","activated","dormant","details","handleDateChange","newStartDate","newEndDate","closeModal","formatValue","value","undefined","toFixed","toLocaleString","toString","renderPlatformBreakdown","Array","isArray","className","children","slice","map","platform","index","fileName","_jsxFileName","lineNumber","columnNumber","event_count","length","renderParetoBreakdown","item","idx","reason","count","toLocaleDateString","onDateChange","viewBox","fill","fillRule","d","clipRule","categoryMetrics","Object","entries","filter","config","key","Icon","definition","status","message","displayValue","displayContent","content","numerator","denominator","onViewDetails","daily_trends","row","date","event","unique_users","isOpen","onClose","_c","$RefreshReg$"],"sources":["/Users/canyonsmith/Desktop/metrics-cc360-2025/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { subDays } from 'date-fns';\nimport { fetchDashboardMetrics, fetchMetricDetails } from './services/api';\nimport MetricCard from './components/MetricCard';\nimport DateRangePicker from './components/DateRangePicker';\nimport MetricDetailsModal from './components/MetricDetailsModal';\nimport { BarChart3, TrendingUp, Users, CreditCard, Activity, Target, Monitor, Calendar, AlertTriangle, DollarSign } from 'lucide-react';\n\nfunction App() {\n  const [startDate, setStartDate] = useState(subDays(new Date(), 30));\n  const [endDate, setEndDate] = useState(new Date());\n  const [metrics, setMetrics] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedMetric, setSelectedMetric] = useState(null);\n  const [metricDetails, setMetricDetails] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isDetailsLoading, setIsDetailsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [showOnlyNonActivated, setShowOnlyNonActivated] = useState(false);\n  const [showOnlyDormant, setShowOnlyDormant] = useState(false);\n\n  const metricConfigs = {\n    'dormant_account_rate': {\n      title: 'Dormant Account Rate',\n      icon: Users,\n      description: 'Percentage of new purchasers with zero sessions after first purchase',\n      format: 'percentage',\n      category: 'Customer Success'\n    },\n    'involuntary_churn_rate': {\n      title: 'Involuntary Churn Rate',\n      icon: CreditCard,\n      description: 'Percentage of subscriptions canceled due to failed payments',\n      format: 'percentage',\n      category: 'Finance'\n    },\n    'dunning_recovery_rate': {\n      title: 'Dunning Recovery Rate',\n      icon: AlertTriangle,\n      description: 'Percentage of failed payments that were successfully recovered',\n      format: 'percentage',\n      category: 'Finance'\n    },\n    't24h_activation_rate': {\n      title: '24h Activation Rate',\n      icon: Target,\n      description: 'Percentage of new users who performed a key action within 24 hours',\n      format: 'percentage',\n      category: 'Customer Success'\n    },\n    'source_attribution_coverage': {\n      title: 'Source Attribution Coverage',\n      icon: BarChart3,\n      description: 'Percentage of pageviews with campaign attribution data',\n      format: 'percentage',\n      category: 'Marketing'\n    },\n    'cac': {\n      title: 'Customer Acquisition Cost',\n      icon: DollarSign,\n      description: 'Total ad spend divided by total new trials',\n      format: 'currency',\n      category: 'Marketing'\n    },\n    'ltv': {\n      title: 'Lifetime Value',\n      icon: DollarSign,\n      description: 'Average revenue per customer over their lifetime',\n      format: 'currency',\n      category: 'Finance'\n    },\n    'platform_breakdown': {\n      title: 'Platform Breakdown',\n      icon: Monitor,\n      description: 'Top platforms by event count',\n      format: 'list',\n      category: 'Product & IT'\n    },\n    'root_cause_pareto': {\n      title: 'Root Cause Pareto',\n      icon: Activity,\n      description: 'Top payment failure reasons',\n      format: 'pareto',\n      category: 'Finance'\n    },\n    'daily_trends': {\n      title: 'Daily Event Trends',\n      icon: Calendar,\n      description: 'Daily event counts and user activity',\n      format: 'trends',\n      category: 'Product & IT'\n    }\n  };\n\n  useEffect(() => {\n    fetchMetrics();\n  }, [startDate, endDate]);\n\n  const fetchMetrics = async () => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const data = await fetchDashboardMetrics(\n        \n        startDate.toISOString(),\n        endDate.toISOString()\n      );\n      setMetrics(data);\n      console.log('data', data);\n    } catch (error) {\n      console.error('Failed to fetch metrics:', error);\n      setError('Failed to load metrics. Please check your connection and try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleViewDetails = async (metric) => {\n    setSelectedMetric(metric);\n    setIsModalOpen(true);\n    setIsDetailsLoading(true);\n    let extraParams = {};\n    if (metric === 't24h_activation_rate' && showOnlyNonActivated) {\n      extraParams.activated = 'false';\n    }\n    if (metric === 'dormant_account_rate' && showOnlyDormant) {\n      extraParams.dormant = 'true';\n    }\n    // Log for debugging\n    console.log('Fetching details for', metric, 'from', startDate.toISOString(), 'to', endDate.toISOString(), 'params:', extraParams);\n    try {\n      const details = await fetchMetricDetails(\n        metric,\n        startDate.toISOString(),\n        endDate.toISOString(),\n        extraParams\n      );\n      setMetricDetails(details);\n    } catch (error) {\n      console.error('Failed to fetch metric details:', error);\n      setMetricDetails([]);\n    } finally {\n      setIsDetailsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (isModalOpen && selectedMetric === 't24h_activation_rate') {\n      handleViewDetails('t24h_activation_rate');\n    }\n    // eslint-disable-next-line\n  }, [showOnlyNonActivated]);\n\n  useEffect(() => {\n    if (isModalOpen && selectedMetric === 'dormant_account_rate') {\n      handleViewDetails('dormant_account_rate');\n    }\n    // eslint-disable-next-line\n  }, [showOnlyDormant]);\n\n  const handleDateChange = (newStartDate, newEndDate) => {\n    setStartDate(newStartDate);\n    setEndDate(newEndDate);\n  };\n\n  const closeModal = () => {\n    setIsModalOpen(false);\n    setSelectedMetric(null);\n    setMetricDetails([]);\n  };\n\n  const formatValue = (value, format) => {\n    if (value === null || value === undefined) return 'N/A';\n    \n    switch (format) {\n      case 'percentage':\n        return `${(value * 100).toFixed(1)}%`;\n      case 'currency':\n        return `$${value.toFixed(2)}`;\n      case 'number':\n        return value.toLocaleString();\n      default:\n        return value.toString();\n    }\n  };\n\n  const renderPlatformBreakdown = (data) => {\n    \n    if (!data || !Array.isArray(data)) return null;\n    \n    return (\n      <div className=\"space-y-2\">\n        {data.slice(0, 3).map((platform, index) => (\n          <div key={index} className=\"flex justify-between text-sm\">\n            <span className=\"text-gray-600\">{platform.platform}</span>\n            <span className=\"font-medium\">{platform.event_count.toLocaleString()}</span>\n          </div>\n        ))}\n        {data.length > 3 && (\n          <div className=\"text-xs text-gray-500 text-center\">\n            +{data.length - 3} more platforms\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderParetoBreakdown = (data) => {\n    if (!data || !Array.isArray(data)) return null;\n    return (\n      <div className=\"space-y-2\">\n        {data.map((item, idx) => (\n          <div key={idx} className=\"flex items-center justify-between\">\n            <span className=\"bg-purple-700/80 text-white px-2 py-1 rounded font-mono text-xs\">\n              {item.reason}\n            </span>\n            <span className=\"bg-gray-900/80 text-white px-2 py-1 rounded font-mono text-base font-bold\">\n              {item.count.toLocaleString()}\n            </span>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center\">\n              <BarChart3 className=\"w-8 h-8 text-primary-600 mr-3\" />\n              <h1 className=\"text-2xl font-bold text-gray-900\">SaaS Metrics Dashboard</h1>\n            </div>\n            <div className=\"text-sm text-gray-500\">\n              {startDate.toLocaleDateString()} - {endDate.toLocaleDateString()}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Date Range Picker always visible */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n        <DateRangePicker\n          startDate={startDate}\n          endDate={endDate}\n          onDateChange={handleDateChange}\n        />\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {error && (\n          <div className=\"mb-6 bg-red-50 border border-red-200 rounded-md p-4\">\n            <div className=\"flex\">\n              <div className=\"flex-shrink-0\">\n                <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <div className=\"ml-3\">\n                <h3 className=\"text-sm font-medium text-red-800\">Error loading metrics</h3>\n                <div className=\"mt-2 text-sm text-red-700\">{error}</div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Group metrics by category */}\n        {['Customer Success', 'Finance', 'Sales', 'Product & IT', 'Marketing'].map(category => {\n          const categoryMetrics = Object.entries(metricConfigs).filter(([, config]) => config.category === category);\n          if (categoryMetrics.length === 0) return null;\n          return (\n            <div key={category} className=\"mb-10\">\n              <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">{category}</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {categoryMetrics.map(([key, config]) => {\n                  const metric = metrics[key];\n                  const Icon = config.icon;\n                  if (!metric) {\n                    return (\n                      <MetricCard\n                        key={key}\n                        title={config.title}\n                        value={null}\n                        definition={config.description}\n                        status=\"missing\"\n                        message=\"No data available\"\n                        isLoading={isLoading}\n                      />\n                    );\n                  }\n                  let displayValue = null;\n                  let displayContent = null;\n                  if (config.format === 'list' && metric.data) {\n                    displayContent = renderPlatformBreakdown(metric.data);\n                  } else if (config.format === 'pareto' && metric.data) {\n                    displayContent = renderParetoBreakdown(metric.data);\n                  } else if (metric.value !== null && metric.value !== undefined) {\n                    displayValue = formatValue(metric.value, config.format);\n                  }\n                  return (\n                    <MetricCard\n                      key={key}\n                      title={config.title}\n                      value={displayValue}\n                      content={displayContent}\n                      definition={config.description}\n                      status={metric.status || 'ok'}\n                      message={metric.message}\n                      numerator={metric.numerator}\n                      denominator={metric.denominator}\n                      onViewDetails={() => handleViewDetails(key)}\n                      isLoading={isLoading}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          );\n        })}\n\n        {/* Additional sections for detailed data */}\n        {metrics.daily_trends && metrics.daily_trends.data && (\n          <div className=\"bg-white rounded-lg border p-6 shadow-sm mb-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Daily Event Trends</h2>\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Event</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Count</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Unique Users</th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {metrics.daily_trends.data.slice(0, 10).map((row, index) => (\n                    <tr key={index}>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{row.date}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{row.event}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{row.event_count.toLocaleString()}</td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{row.unique_users.toLocaleString()}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <MetricDetailsModal\n        isOpen={isModalOpen}\n        onClose={closeModal}\n        metric={selectedMetric}\n        data={metricDetails}\n        isLoading={isDetailsLoading}\n        showOnlyNonActivated={showOnlyNonActivated}\n        setShowOnlyNonActivated={setShowOnlyNonActivated}\n        showOnlyDormant={showOnlyDormant}\n        setShowOnlyDormant={setShowOnlyDormant}\n      />\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}